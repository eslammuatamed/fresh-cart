"use strict";(self.webpackChunkfresh_cart=self.webpackChunkfresh_cart||[]).push([[347],{3347:(G,g,a)=>{a.r(g),a.d(g,{SettingModule:()=>z});var u=a(6814),p=a(7163),r=a(95),f=a(7394),e=a(4769),h=a(9862);let _=(()=>{class t{constructor(n){this._HttpClient=n,this.email=""}sendEmail(n){return this.email=n,this._HttpClient.post("https://ecommerce.routemisr.com/api/v1/auth/forgotPasswords",{email:n})}verifyCode(n){return this._HttpClient.post("https://ecommerce.routemisr.com/api/v1/auth/verifyResetCode",{resetCode:n})}resetPassword(n){return this._HttpClient.put("https://ecommerce.routemisr.com/api/v1/auth/resetPassword",n)}static#e=this.\u0275fac=function(s){return new(s||t)(e.LFG(h.eN))};static#t=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Z(t,o){1&t&&(e.TgZ(0,"p",11),e._uU(1," email is required "),e.qZA())}function v(t,o){1&t&&(e.TgZ(0,"p",11),e._uU(1," email is not valid "),e.qZA())}function T(t,o){if(1&t&&(e.TgZ(0,"div",9),e.YNc(1,Z,2,0,"p",10),e.YNc(2,v,2,0,"p",10),e.qZA()),2&t){const n=e.oxw();let s,i;e.xp6(1),e.Q6J("ngIf",null==(s=n.resetForm.get("email"))?null:s.getError("required")),e.xp6(1),e.Q6J("ngIf",null==(i=n.resetForm.get("email"))?null:i.getError("email"))}}function w(t,o){1&t&&(e.TgZ(0,"span"),e._uU(1,"send email now"),e.qZA())}function C(t,o){1&t&&e._UZ(0,"i",12)}function F(t,o){if(1&t&&(e.TgZ(0,"p",9),e._uU(1),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.hij(" ",n.msgErr," ")}}function b(t,o){1&t&&(e.TgZ(0,"p",11),e._uU(1," code is required "),e.qZA())}function q(t,o){1&t&&(e.TgZ(0,"p",11),e._uU(1," code is not valid "),e.qZA())}function x(t,o){if(1&t&&(e.TgZ(0,"div",9),e.YNc(1,b,2,0,"p",10),e.YNc(2,q,2,0,"p",10),e.qZA()),2&t){const n=e.oxw();let s,i;e.xp6(1),e.Q6J("ngIf",null==(s=n.resetForm.get("code"))?null:s.getError("required")),e.xp6(1),e.Q6J("ngIf",null==(i=n.resetForm.get("code"))?null:i.getError("pattern"))}}function I(t,o){1&t&&(e.TgZ(0,"span"),e._uU(1,"send email now"),e.qZA())}function J(t,o){1&t&&e._UZ(0,"i",12)}function E(t,o){if(1&t&&(e.TgZ(0,"p",9),e._uU(1),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.hij(" ",n.msgErr," ")}}function U(t,o){1&t&&(e.TgZ(0,"p",14),e._uU(1," email is required "),e.qZA())}function N(t,o){1&t&&(e.TgZ(0,"p",14),e._uU(1," email is not valid "),e.qZA())}function S(t,o){if(1&t&&(e.TgZ(0,"div",12),e.YNc(1,U,2,0,"p",13),e.YNc(2,N,2,0,"p",13),e.qZA()),2&t){const n=e.oxw();let s,i;e.xp6(1),e.Q6J("ngIf",null==(s=n.resetForm.get("email"))?null:s.getError("required")),e.xp6(1),e.Q6J("ngIf",null==(i=n.resetForm.get("email"))?null:i.getError("email"))}}function y(t,o){1&t&&(e.TgZ(0,"p",14),e._uU(1," newPassword is required "),e.qZA())}function Q(t,o){1&t&&(e.TgZ(0,"ul",14)(1,"li"),e._uU(2,"must be"),e.qZA(),e.TgZ(3,"li"),e._uU(4,"* Start with a letter (either uppercase or lowercase)."),e.qZA(),e.TgZ(5,"li"),e._uU(6,"* Be between 6 and 9 characters in total."),e.qZA(),e.TgZ(7,"li"),e._uU(8,"* Can only contain letters (A-Z or a-z) and numbers (0-9)"),e.qZA()())}function R(t,o){if(1&t&&(e.TgZ(0,"div",12),e.YNc(1,y,2,0,"p",13),e.YNc(2,Q,9,0,"ul",13),e.qZA()),2&t){const n=e.oxw();let s,i;e.xp6(1),e.Q6J("ngIf",null==(s=n.resetForm.get("newPassword"))?null:s.getError("required")),e.xp6(1),e.Q6J("ngIf",null==(i=n.resetForm.get("newPassword"))?null:i.getError("pattern"))}}function P(t,o){1&t&&(e.TgZ(0,"span"),e._uU(1,"reset password now"),e.qZA())}function B(t,o){1&t&&e._UZ(0,"i",15)}function k(t,o){if(1&t&&(e.TgZ(0,"p",12),e._uU(1),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.hij(" ",n.msgErr," ")}}const j=[{path:"",redirectTo:"email",pathMatch:"full"},{path:"email",component:(()=>{class t{constructor(n,s,i){this._Router=n,this._FormBuilder=s,this._ResetPasswordService=i,this.msgErr="",this.loading=!1,this.resetSubscription=new f.w0,this.resetForm=this._FormBuilder.group({email:["",[r.kI.required,r.kI.email]]})}handel(){this.loading=!0;const n=this.resetForm.get("email");this.resetSubscription=this._ResetPasswordService.sendEmail(n?.value).subscribe({next:s=>{this.loading=!1,this._Router.navigate(["/setting/code"])},error:s=>{this.loading=!1,this.msgErr=s.message}})}ngOnDestroy(){this.resetSubscription.unsubscribe()}static#e=this.\u0275fac=function(s){return new(s||t)(e.Y36(p.F0),e.Y36(r.qu),e.Y36(_))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-email"]],decls:14,vars:6,consts:[[3,"formGroup","ngSubmit"],[1,"form-item"],["for","email"],["formControlName","email","id","email","type","email",1,"form-control"],["inputEmail",""],["class","alert alert-danger",4,"ngIf"],["type","submit",1,"btn-main",3,"disabled"],[4,"ngIf"],["class","fas fa-spinner fa-spin",4,"ngIf"],[1,"alert","alert-danger"],["class","m-0",4,"ngIf"],[1,"m-0"],[1,"fas","fa-spinner","fa-spin"]],template:function(s,i){if(1&s&&(e.TgZ(0,"section")(1,"h2"),e._uU(2," Enter your email address "),e.qZA(),e.TgZ(3,"form",0),e.NdJ("ngSubmit",function(){return i.handel()}),e.TgZ(4,"div",1)(5,"label",2),e._uU(6,"Email:"),e.qZA(),e._UZ(7,"input",3,4),e.YNc(9,T,3,2,"div",5),e.qZA(),e.TgZ(10,"button",6),e.YNc(11,w,2,0,"span",7),e.YNc(12,C,1,0,"i",8),e.qZA(),e.YNc(13,F,2,1,"p",5),e.qZA()()),2&s){const m=e.MAs(8);let l;e.xp6(3),e.Q6J("formGroup",i.resetForm),e.xp6(6),e.Q6J("ngIf",(null==(l=i.resetForm.get("email"))?null:l.errors)&&((null==(l=i.resetForm.get("email"))?null:l.touched)||m.value.length>0)),e.xp6(1),e.Q6J("disabled",i.resetForm.invalid),e.xp6(1),e.Q6J("ngIf",!i.loading),e.xp6(1),e.Q6J("ngIf",i.loading),e.xp6(1),e.Q6J("ngIf",i.msgErr)}},dependencies:[u.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u]})}return t})()},{path:"code",component:(()=>{class t{constructor(n,s,i){this._Router=n,this._FormBuilder=s,this._ResetPasswordService=i,this.msgErr="",this.loading=!1,this.resetSubscription=new f.w0,this.resetForm=this._FormBuilder.group({code:["",[r.kI.required,r.kI.pattern(/^[0-9]{5,6}$/)]]})}handel(){this.loading=!0;const n=this.resetForm.get("code");this.resetSubscription=this._ResetPasswordService.verifyCode(n?.value).subscribe({next:s=>{this.loading=!1,this._Router.navigate(["/setting/reset"])},error:s=>{this.loading=!1,this.msgErr=s.message}})}ngOnDestroy(){this.resetSubscription.unsubscribe()}static#e=this.\u0275fac=function(s){return new(s||t)(e.Y36(p.F0),e.Y36(r.qu),e.Y36(_))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-code"]],decls:14,vars:6,consts:[[3,"formGroup","ngSubmit"],[1,"form-item"],["for","code"],["formControlName","code","id","code","type","code",1,"form-control"],["inputcode",""],["class","alert alert-danger",4,"ngIf"],["type","submit",1,"btn-main",3,"disabled"],[4,"ngIf"],["class","fas fa-spinner fa-spin",4,"ngIf"],[1,"alert","alert-danger"],["class","m-0",4,"ngIf"],[1,"m-0"],[1,"fas","fa-spinner","fa-spin"]],template:function(s,i){if(1&s&&(e.TgZ(0,"section")(1,"h2"),e._uU(2," Enter your code "),e.qZA(),e.TgZ(3,"form",0),e.NdJ("ngSubmit",function(){return i.handel()}),e.TgZ(4,"div",1)(5,"label",2),e._uU(6,"code:"),e.qZA(),e._UZ(7,"input",3,4),e.YNc(9,x,3,2,"div",5),e.qZA(),e.TgZ(10,"button",6),e.YNc(11,I,2,0,"span",7),e.YNc(12,J,1,0,"i",8),e.qZA(),e.YNc(13,E,2,1,"p",5),e.qZA()()),2&s){const m=e.MAs(8);let l;e.xp6(3),e.Q6J("formGroup",i.resetForm),e.xp6(6),e.Q6J("ngIf",(null==(l=i.resetForm.get("code"))?null:l.errors)&&((null==(l=i.resetForm.get("code"))?null:l.touched)||m.value.length>0)),e.xp6(1),e.Q6J("disabled",i.resetForm.invalid),e.xp6(1),e.Q6J("ngIf",!i.loading),e.xp6(1),e.Q6J("ngIf",i.loading),e.xp6(1),e.Q6J("ngIf",i.msgErr)}},dependencies:[u.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u]})}return t})()},{path:"reset",component:(()=>{class t{constructor(n,s,i){this._Router=n,this._FormBuilder=s,this._ResetPasswordService=i,this.msgErr="",this.loading=!1,this.email="",this.resetSubscription=new f.w0,this.resetForm=this._FormBuilder.group({email:[this.email,[r.kI.required,r.kI.email]],newPassword:["",[r.kI.required,r.kI.pattern(/^[a-zA-Z][a-zA-Z0-9]{5,8}$/)]]})}ngOnInit(){this.email=this._ResetPasswordService.email}handel(){this.loading=!0,this.resetSubscription=this._ResetPasswordService.resetPassword(this.resetForm.value).subscribe({next:n=>{this.loading=!1,this._Router.navigate(["/login"])},error:n=>{this.loading=!1,this.msgErr=n.message}})}ngOnDestroy(){this.resetSubscription.unsubscribe()}static#e=this.\u0275fac=function(s){return new(s||t)(e.Y36(p.F0),e.Y36(r.qu),e.Y36(_))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-reset"]],decls:20,vars:8,consts:[[3,"formGroup"],[1,"form-item"],["for","email"],["formControlName","email","id","email","type","email",1,"form-control",3,"value"],["inputEmail",""],["class","alert alert-danger",4,"ngIf"],["for","newPassword"],["formControlName","newPassword","id","newPassword","type","password",1,"form-control"],["inputnewPassword",""],["type","submit",1,"btn-main",3,"disabled","click"],[4,"ngIf"],["class","fas fa-spinner fa-spin",4,"ngIf"],[1,"alert","alert-danger"],["class","m-0",4,"ngIf"],[1,"m-0"],[1,"fas","fa-spinner","fa-spin"]],template:function(s,i){if(1&s&&(e.TgZ(0,"section")(1,"h2"),e._uU(2," reset now "),e.qZA(),e.TgZ(3,"form",0)(4,"div",1)(5,"label",2),e._uU(6,"Email:"),e.qZA(),e._UZ(7,"input",3,4),e.YNc(9,S,3,2,"div",5),e.qZA(),e.TgZ(10,"div",1)(11,"label",6),e._uU(12,"newPassword:"),e.qZA(),e._UZ(13,"input",7,8),e.YNc(15,R,3,2,"div",5),e.qZA(),e.TgZ(16,"button",9),e.NdJ("click",function(){return i.handel()}),e.YNc(17,P,2,0,"span",10),e.YNc(18,B,1,0,"i",11),e.qZA(),e.YNc(19,k,2,1,"p",5),e.qZA()()),2&s){const m=e.MAs(8),l=e.MAs(14);let c,d;e.xp6(3),e.Q6J("formGroup",i.resetForm),e.xp6(4),e.Q6J("value",i.email),e.xp6(2),e.Q6J("ngIf",(null==(c=i.resetForm.get("email"))?null:c.errors)&&((null==(c=i.resetForm.get("email"))?null:c.touched)||m.value.length>0)),e.xp6(6),e.Q6J("ngIf",(null==(d=i.resetForm.get("newPassword"))?null:d.errors)&&((null==(d=i.resetForm.get("newPassword"))?null:d.touched)||l.value.length>0)),e.xp6(1),e.Q6J("disabled",i.resetForm.invalid),e.xp6(1),e.Q6J("ngIf",!i.loading),e.xp6(1),e.Q6J("ngIf",i.loading),e.xp6(1),e.Q6J("ngIf",i.msgErr)}},dependencies:[u.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u]})}return t})()}];let M=(()=>{class t{static#e=this.\u0275fac=function(s){return new(s||t)};static#t=this.\u0275mod=e.oAB({type:t});static#n=this.\u0275inj=e.cJS({imports:[p.Bz.forChild(j),p.Bz]})}return t})(),z=(()=>{class t{static#e=this.\u0275fac=function(s){return new(s||t)};static#t=this.\u0275mod=e.oAB({type:t});static#n=this.\u0275inj=e.cJS({imports:[u.ez,M,r.UX,h.JF]})}return t})()}}]);